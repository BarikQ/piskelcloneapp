!function(e){var t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(n,i,function(t){return e[t]}.bind(null,i));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=6)}([function(e,t,r){var n;!function(r,i,o,a){"use strict";var s,c={URL:r.URL||r.webkitURL||r.mozURL||r.msURL,getUserMedia:(s=o.getUserMedia||o.webkitGetUserMedia||o.mozGetUserMedia||o.msGetUserMedia,s?s.bind(o):s),requestAnimFrame:r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame,requestTimeout:function(e,t){if(e=e||c.noop,t=t||0,!c.requestAnimFrame)return setTimeout(e,t);var r=(new Date).getTime(),n=new Object,i=c.requestAnimFrame;return n.value=i(function o(){(new Date).getTime()-r>=t?e.call():n.value=i(o)}),n},Blob:r.Blob||r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||r.MSBlobBuilder,btoa:function(){var e=r.btoa||function(e){for(var t="",r=0,n=e.length,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=void 0,a=void 0,s=void 0,c=void 0,d=void 0,l=void 0,u=void 0;r<n;)c=(o=e.charCodeAt(r++))>>2,d=(3&o)<<4|(a=e.charCodeAt(r++))>>4,l=(15&a)<<2|(s=e.charCodeAt(r++))>>6,u=63&s,isNaN(a)?l=u=64:isNaN(s)&&(u=64),t=t+i.charAt(c)+i.charAt(d)+i.charAt(l)+i.charAt(u);return t};return e?e.bind(r):c.noop}(),isObject:function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},isEmptyObject:function(e){return c.isObject(e)&&!Object.keys(e).length},isArray:function(e){return e&&Array.isArray(e)},isFunction:function(e){return e&&"function"==typeof e},isElement:function(e){return e&&1===e.nodeType},isString:function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},isSupported:{canvas:function(){var e=i.createElement("canvas");return e&&e.getContext&&e.getContext("2d")},webworkers:function(){return r.Worker},blob:function(){return c.Blob},Uint8Array:function(){return r.Uint8Array},Uint32Array:function(){return r.Uint32Array},videoCodecs:function(){var e=i.createElement("video"),t={mp4:!1,h264:!1,ogv:!1,ogg:!1,webm:!1};try{e&&e.canPlayType&&(t.mp4=""!==e.canPlayType('video/mp4; codecs="mp4v.20.8"'),t.h264=""!==(e.canPlayType('video/mp4; codecs="avc1.42E01E"')||e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),t.ogv=""!==e.canPlayType('video/ogg; codecs="theora"'),t.ogg=""!==e.canPlayType('video/ogg; codecs="theora"'),t.webm=-1!==e.canPlayType('video/webm; codecs="vp8, vorbis"'))}catch(e){}return t}()},noop:function(){},each:function(e,t){var r=void 0,n=void 0;if(c.isArray(e))for(r=-1,n=e.length;++r<n&&!1!==t(r,e[r]););else if(c.isObject(e))for(r in e)if(e.hasOwnProperty(r)&&!1===t(r,e[r]))break},mergeOptions:function(e,t){if(c.isObject(e)&&c.isObject(t)&&Object.keys){var r={};return c.each(e,function(t,n){r[t]=e[t]}),c.each(t,function(n,i){var o=t[n];c.isObject(o)&&e[n]?r[n]=c.mergeOptions(e[n],o):r[n]=o}),r}},setCSSAttr:function(e,t,r){c.isElement(e)&&(c.isString(t)&&c.isString(r)?e.style[t]=r:c.isObject(t)&&c.each(t,function(t,r){e.style[t]=r}))},removeElement:function(e){c.isElement(e)&&e.parentNode&&e.parentNode.removeChild(e)},createWebWorker:function(e){if(!c.isString(e))return{};try{var t=new c.Blob([e],{type:"text/javascript"}),r=c.URL.createObjectURL(t);return{objectUrl:r,worker:new Worker(r)}}catch(e){return""+e}},getExtension:function(e){return e.substr(e.lastIndexOf(".")+1,e.length)},getFontSize:function(){var e=arguments.length>0&&arguments[0]!==a?arguments[0]:{};if(!i.body||!1===e.resizeFont)return e.fontSize;var t=e.text,r=e.gifWidth,n=parseInt(e.fontSize,10),o=parseInt(e.minFontSize,10),s=i.createElement("div"),c=i.createElement("span");for(s.setAttribute("width",r),s.appendChild(c),c.innerHTML=t,c.style.fontSize=n+"px",c.style.textIndent="-9999px",c.style.visibility="hidden",i.body.appendChild(c);c.offsetWidth>r&&n>=o;)c.style.fontSize=--n+"px";return i.body.removeChild(c),n+"px"},webWorkerError:!1},d=Object.freeze({default:c}),l={validate:function(e){e=c.isObject(e)?e:{};var t={};return c.each(l.validators,function(r,n){var i=n.errorCode;if(!e[i]&&!n.condition)return(t=n).error=!0,!1}),delete t.condition,t},isValid:function(e){var t=!0!==l.validate(e).error;return t},validators:[{condition:c.isFunction(c.getUserMedia),errorCode:"getUserMedia",errorMsg:"The getUserMedia API is not supported in your browser"},{condition:c.isSupported.canvas(),errorCode:"canvas",errorMsg:"Canvas elements are not supported in your browser"},{condition:c.isSupported.webworkers(),errorCode:"webworkers",errorMsg:"The Web Workers API is not supported in your browser"},{condition:c.isFunction(c.URL),errorCode:"window.URL",errorMsg:"The window.URL API is not supported in your browser"},{condition:c.isSupported.blob(),errorCode:"window.Blob",errorMsg:"The window.Blob File API is not supported in your browser"},{condition:c.isSupported.Uint8Array(),errorCode:"window.Uint8Array",errorMsg:"The window.Uint8Array function constructor is not supported in your browser"},{condition:c.isSupported.Uint32Array(),errorCode:"window.Uint32Array",errorMsg:"The window.Uint32Array function constructor is not supported in your browser"}],messages:{videoCodecs:{errorCode:"videocodec",errorMsg:"The video codec you are trying to use is not supported in your browser"}}},u=Object.freeze({default:l}),f=function(){},m={sampleInterval:10,numWorkers:2,filter:"",gifWidth:200,gifHeight:200,interval:.1,numFrames:10,frameDuration:1,keepCameraOn:!1,images:[],video:null,webcamVideoElement:null,cameraStream:null,text:"",fontWeight:"normal",fontSize:"16px",minFontSize:"10px",resizeFont:!1,fontFamily:"sans-serif",fontColor:"#ffffff",textAlign:"center",textBaseline:"bottom",textXCoordinate:null,textYCoordinate:null,progressCallback:f,completeCallback:f,saveRenderingContexts:!1,savedRenderingContexts:[],showFrameText:!0,crossOrigin:"Anonymous",waterMark:null,waterMarkHeight:null,waterMarkWidth:null,waterMarkXCoordinate:1,waterMarkYCoordinate:1},h=Object.freeze({default:m});function g(){return l.isValid()}function v(){var e,t,r,n,i,o=256,a=499,s=491,c=487,d=503,l=3*d,u=o-1,f=4,m=100,h=16,g=1<<h,v=10,p=10,b=g>>p,y=g<<v-p,w=6,C=(o>>3)*(1<<w),S=30,k=1024,E=256,x=1<<18,L=[],F=[],A=[],O=[];function M(e,t,r,n,a){var s,c,d,l,u,f,m;for((d=t-e)<-1&&(d=-1),(l=t+e)>o&&(l=o),s=t+1,c=t-1,f=1;s<l||c>d;){if(u=O[f++],s<l){m=i[s++];try{m[0]-=u*(m[0]-r)/x|0,m[1]-=u*(m[1]-n)/x|0,m[2]-=u*(m[2]-a)/x|0}catch(e){}}if(c>d){m=i[c--];try{m[0]-=u*(m[0]-r)/x|0,m[1]-=u*(m[1]-n)/x|0,m[2]-=u*(m[2]-a)/x|0}catch(e){}}}}function T(e,t,r,n,o){var a=i[t],s=e/k;a[0]-=s*(a[0]-r)|0,a[1]-=s*(a[1]-n)|0,a[2]-=s*(a[2]-o)|0}function R(e,t,r){var n,a,s,c,d,l,u,m,g,w;for(g=m=~(1<<31),u=l=-1,n=0;n<o;n++)(a=(w=i[n])[0]-e)<0&&(a=-a),(s=w[1]-t)<0&&(s=-s),a+=s,(s=w[2]-r)<0&&(s=-s),(a+=s)<m&&(m=a,l=n),(c=a-(F[n]>>h-f))<g&&(g=c,u=n),d=A[n]>>p,A[n]-=d,F[n]+=d<<v;return A[l]+=b,F[l]-=y,u}(function(e,a,s){var c,d;for(t=e,r=a,n=s,i=new Array(o),c=0;c<o;c++)i[c]=new Array(4),(d=i[c])[0]=d[1]=d[2]=(c<<f+8)/o|0,A[c]=g/o|0,F[c]=0}).apply(this,arguments);var I={map:function(e,t,r){var n,a,s,c,d,l,u;for(d=1e3,u=-1,a=(n=L[t])-1;n<o||a>=0;)n<o&&((s=(l=i[n])[1]-t)>=d?n=o:(n++,s<0&&(s=-s),(c=l[0]-e)<0&&(c=-c),(s+=c)<d&&((c=l[2]-r)<0&&(c=-c),(s+=c)<d&&(d=s,u=l[3])))),a>=0&&((s=t-(l=i[a])[1])>=d?a=-1:(a--,s<0&&(s=-s),(c=l[0]-e)<0&&(c=-c),(s+=c)<d&&((c=l[2]-r)<0&&(c=-c),(s+=c)<d&&(d=s,u=l[3]))));return u}};return I.process=function(){return function(){var i,o,u,h,g,v,p,b,y,x,L,F,A,I;for(r<l&&(n=1),e=30+(n-1)/3,F=t,A=0,I=r,x=(L=r/(3*n))/m|0,b=k,(p=(v=C)>>w)<=1&&(p=0),i=0;i<p;i++)O[i]=b*((p*p-i*i)*E/(p*p));for(y=r<l?3:r%a!=0?3*a:r%s!=0?3*s:r%c!=0?3*c:3*d,i=0;i<L;)if(T(b,o=R(u=(255&F[A+0])<<f,h=(255&F[A+1])<<f,g=(255&F[A+2])<<f),u,h,g),0!==p&&M(p,o,u,h,g),(A+=y)>=I&&(A-=r),0===x&&(x=1),++i%x==0)for(b-=b/e,(p=(v-=v/S)>>w)<=1&&(p=0),o=0;o<p;o++)O[o]=b*((p*p-o*o)*E/(p*p))}(),function(){var e;for(e=0;e<o;e++)i[e][0]>>=f,i[e][1]>>=f,i[e][2]>>=f,i[e][3]=e}(),function(){var e,t,r,n,a,s,c,d;for(c=0,d=0,e=0;e<o;e++){for(r=e,n=(a=i[e])[1],t=e+1;t<o;t++)(s=i[t])[1]<n&&(r=t,n=s[1]);if(s=i[r],e!=r&&(t=s[0],s[0]=a[0],a[0]=t,t=s[1],s[1]=a[1],a[1]=t,t=s[2],s[2]=a[2],a[2]=t,t=s[3],s[3]=a[3],a[3]=t),n!=c){for(L[c]=d+e>>1,t=c+1;t<n;t++)L[t]=e;c=n,d=e}}for(L[c]=d+u>>1,t=c+1;t<256;t++)L[t]=u}(),function(){for(var e=[],t=new Array(o),r=0;r<o;r++)t[i[r][3]]=r;for(var n=0,a=0;a<o;a++){var s=t[a];e[n++]=i[s][0],e[n++]=i[s][1],e[n++]=i[s][2]}return e}()},I}function p(){try{this.onmessage=function(t){var r,n=t.data||{};n.gifshot&&(r=e.run(n),postMessage(r))}}catch(e){}var e={dataToRGB:function(e,t,r){for(var n=t*r*4,i=0,o=[];i<n;)o.push(e[i++]),o.push(e[i++]),o.push(e[i++]),i++;return o},componentizedPaletteToArray:function(e){e=e||[];for(var t=[],r=0;r<e.length;r+=3){var n=e[r],i=e[r+1],o=e[r+2];t.push(n<<16|i<<8|o)}return t},processFrameWithQuantizer:function(e,t,r,n){for(var i=this.dataToRGB(e,t,r),o=new v(i,i.length,n),a=o.process(),s=new Uint32Array(this.componentizedPaletteToArray(a)),c=t*r,d=new Uint8Array(c),l=0,u=0;u<c;u++){var f=i[l++],m=i[l++],h=i[l++];d[u]=o.map(f,m,h)}return{pixels:d,palette:s}},run:function(e){var t=e=e||{},r=t.height,n=(t.palette,t.sampleInterval),i=t.width,o=e.data;return this.processFrameWithQuantizer(o,i,r,n)}};return e}function b(e,t,r,n){var i=0,o=(n=n===a?{}:n).loop===a?null:n.loop,s=n.palette===a?null:n.palette;if(t<=0||r<=0||t>65535||r>65535)throw"Width/Height invalid.";e[i++]=71,e[i++]=73,e[i++]=70,e[i++]=56,e[i++]=57,e[i++]=97;if(e[i++]=255&t,e[i++]=t>>8&255,e[i++]=255&r,e[i++]=r>>8&255,e[i++]=0|(null!==s?128:0),e[i++]=0,e[i++]=0,null!==o){if(o<0||o>65535)throw"Loop count invalid.";e[i++]=33,e[i++]=255,e[i++]=11,e[i++]=78,e[i++]=69,e[i++]=84,e[i++]=83,e[i++]=67,e[i++]=65,e[i++]=80,e[i++]=69,e[i++]=50,e[i++]=46,e[i++]=48,e[i++]=3,e[i++]=1,e[i++]=255&o,e[i++]=o>>8&255,e[i++]=0}var c=!1;this.addFrame=function(t,r,n,o,d,l){if(!0===c&&(--i,c=!1),l=l===a?{}:l,t<0||r<0||t>65535||r>65535)throw"x/y invalid.";if(n<=0||o<=0||n>65535||o>65535)throw"Width/Height invalid.";if(d.length<n*o)throw"Not enough pixels for the frame size.";var u=!0,f=l.palette;if(f!==a&&null!==f||(u=!1,f=s),f===a||null===f)throw"Must supply either a local or global palette.";for(var m=function(e){var t=e.length;if(t<2||t>256||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}(f),h=0;m>>=1;)++h;m=1<<h;var g=l.delay===a?0:l.delay,v=l.disposal===a?0:l.disposal;if(v<0||v>3)throw"Disposal out of range.";var p=!1,b=0;if(l.transparent!==a&&null!==l.transparent&&(p=!0,(b=l.transparent)<0||b>=m))throw"Transparent color index.";if((0!==v||p||0!==g)&&(e[i++]=33,e[i++]=249,e[i++]=4,e[i++]=v<<2|(!0===p?1:0),e[i++]=255&g,e[i++]=g>>8&255,e[i++]=b,e[i++]=0),e[i++]=44,e[i++]=255&t,e[i++]=t>>8&255,e[i++]=255&r,e[i++]=r>>8&255,e[i++]=255&n,e[i++]=n>>8&255,e[i++]=255&o,e[i++]=o>>8&255,e[i++]=!0===u?128|h-1:0,!0===u)for(var y=0,w=f.length;y<w;++y){var C=f[y];e[i++]=C>>16&255,e[i++]=C>>8&255,e[i++]=255&C}i=function(e,t,r,n){e[t++]=r;var i=t++,o=1<<r,s=o-1,c=o+1,d=c+1,l=r+1,u=0,f=0;function m(r){for(;u>=r;)e[t++]=255&f,f>>=8,u-=8,t===i+256&&(e[i]=255,i=t++)}function h(e){f|=e<<u,u+=l,m(8)}var g=n[0]&s,v={};h(o);for(var p=1,b=n.length;p<b;++p){var y=n[p]&s,w=g<<8|y,C=v[w];if(C===a){for(f|=g<<u,u+=l;u>=8;)e[t++]=255&f,f>>=8,u-=8,t===i+256&&(e[i]=255,i=t++);4096===d?(h(o),d=c+1,l=r+1,v={}):(d>=1<<l&&++l,v[w]=d++),g=y}else g=C}h(g),h(c),m(1),i+1===t?e[i]=0:(e[i]=t-i-1,e[t++]=0);return t}(e,i,h<2?2:h,d)},this.end=function(){return!1===c&&(e[i++]=59,c=!0),i}}var y=function(){},w=function(e){this.canvas=null,this.ctx=null,this.repeat=0,this.frames=[],this.numRenderedFrames=0,this.onRenderCompleteCallback=y,this.onRenderProgressCallback=y,this.workers=[],this.availableWorkers=[],this.generatingGIF=!1,this.options=e,this.initializeWebWorkers(e)};w.prototype={workerMethods:p(),initializeWebWorkers:function(e){var t,r=v.toString()+"("+p.toString()+"());",n=void 0,o=void 0,a=void 0,s=-1,d="";for(t=e.numWorkers;++s<t;)n=c.createWebWorker(r),c.isObject(n)?(o=n.objectUrl,a=n.worker,this.workers.push({worker:a,objectUrl:o}),this.availableWorkers.push(a)):(d=n,c.webWorkerError=!!n);this.workerError=d,this.canvas=i.createElement("canvas"),this.canvas.width=e.gifWidth,this.canvas.height=e.gifHeight,this.ctx=this.canvas.getContext("2d"),this.frames=[]},getWorker:function(){return this.availableWorkers.pop()},freeWorker:function(e){this.availableWorkers.push(e)},byteMap:function(){for(var e=[],t=0;t<256;t++)e[t]=String.fromCharCode(t);return e}(),bufferToString:function(e){for(var t=e.length,r="",n=-1;++n<t;)r+=this.byteMap[e[n]];return r},onFrameFinished:function(e){var t=this,r=t.frames,n=!!(t.options.images||[]).length,i=r.every(function(e){return!e.beingProcessed&&e.done});t.numRenderedFrames++,n&&e(t.numRenderedFrames/r.length),t.onRenderProgressCallback(.75*t.numRenderedFrames/r.length),i?t.generatingGIF||t.generateGIF(r,t.onRenderCompleteCallback):c.requestTimeout(function(){t.processNextFrame()},1)},processFrame:function(e){var t=this,r=(this.options,this.options),n=r.progressCallback,i=r.sampleInterval,o=this.frames,s=void 0,c=void 0,d=function(){var e=(arguments.length>0&&arguments[0]!==a?arguments[0]:{}).data;delete s.data,s.pixels=Array.prototype.slice.call(e.pixels),s.palette=Array.prototype.slice.call(e.palette),s.done=!0,s.beingProcessed=!1,t.freeWorker(c),t.onFrameFinished(n)};(s=o[e]).beingProcessed||s.done?this.onFrameFinished():(s.sampleInterval=i,s.beingProcessed=!0,s.gifshot=!0,(c=this.getWorker())?(c.onmessage=d,c.postMessage(s)):d({data:t.workerMethods.run(s)}))},startRendering:function(e){this.onRenderCompleteCallback=e;for(var t=0;t<this.options.numWorkers&&t<this.frames.length;t++)this.processFrame(t)},processNextFrame:function(){for(var e=-1,t=0;t<this.frames.length;t++){var r=this.frames[t];if(!r.done&&!r.beingProcessed){e=t;break}}e>=0&&this.processFrame(e)},generateGIF:function(e,t){var r=[],n={loop:this.repeat},i=this.options,o=i.interval,a=i.frameDuration,s=!!i.images.length,d=i.gifHeight,l=i.gifWidth,u=new b(r,l,d,n),f=this.onRenderProgressCallback,m=s?100*o:0,h=void 0;this.generatingGIF=!0,c.each(e,function(t,r){var n=r.palette;f(.75+.25*r.position*1/e.length);for(var i=0;i<a;i++)u.addFrame(0,0,l,d,r.pixels,{palette:n,delay:m})}),u.end(),f(1),this.frames=[],this.generatingGIF=!1,c.isFunction(t)&&(h=this.bufferToString(r),t("data:image/gif;base64,"+c.btoa(h)))},setRepeat:function(e){this.repeat=e},addFrame:function(e,t,r){t=c.isObject(t)?t:{};var n=this.ctx,i=this.options,o=i.gifWidth,a=i.gifHeight,s=c.getFontSize(t),d=t,l=d.filter,u=d.fontColor,f=d.fontFamily,m=d.fontWeight,h=(d.gifHeight,d.gifWidth,d.text),g=d.textAlign,v=d.textBaseline,p=d.waterMark,b=d.waterMarkHeight,y=d.waterMarkWidth,w=d.waterMarkXCoordinate,C=d.waterMarkYCoordinate,S=t.textXCoordinate?t.textXCoordinate:"left"===g?1:"right"===g?o:o/2,k=t.textYCoordinate?t.textYCoordinate:"top"===v?1:"center"===v?a/2:a,E=m+" "+s+" "+f,x=r&&t.showFrameText?r:h,L=void 0;try{n.filter=l,n.drawImage(e,0,0,o,a),x&&(n.font=E,n.fillStyle=u,n.textAlign=g,n.textBaseline=v,n.fillText(x,S,k)),p&&n.drawImage(p,w,C,y,b),L=n.getImageData(0,0,o,a),this.addFrameImageData(L)}catch(e){return""+e}},addFrameImageData:function(){var e=arguments.length>0&&arguments[0]!==a?arguments[0]:{},t=this.frames,r=e.data;this.frames.push({data:r,width:e.width,height:e.height,palette:null,dithering:null,done:!1,beingProcessed:!1,position:t.length})},onRenderProgress:function(e){this.onRenderProgressCallback=e},isRendering:function(){return this.generatingGIF},getBase64GIF:function(e){var t=this;t.startRendering(function(r){t.destroyWorkers(),c.requestTimeout(function(){e(r)},0)})},destroyWorkers:function(){if(!this.workerError){var e=this.workers;c.each(e,function(e,t){var r=t.worker,n=t.objectUrl;r.terminate(),c.URL.revokeObjectURL(n)})}}};var C=function(){},S={getGIF:function(){var e=arguments.length>0&&arguments[0]!==a?arguments[0]:{},t=arguments[1];t=c.isFunction(t)?t:C;var r=i.createElement("canvas"),n=void 0,o=!!e.images.length,s=e.cameraStream,d=e.crop,l=e.filter,u=e.fontColor,f=e.fontFamily,m=e.fontWeight,h=e.keepCameraOn,g=(e.numWorkers,e.progressCallback),v=e.saveRenderingContexts,p=e.savedRenderingContexts,b=e.text,y=e.textAlign,S=e.textBaseline,k=e.videoElement,E=e.videoHeight,x=e.videoWidth,L=e.webcamVideoElement,F=e.waterMark,A=e.waterMarkHeight,O=e.waterMarkWidth,M=e.waterMarkXCoordinate,T=e.waterMarkYCoordinate,R=Number(e.gifWidth),I=Number(e.gifHeight),U=Number(e.interval),W=(Number(e.sampleInterval),o?0:1e3*U),j=[],q=p.length?p.length:e.numFrames,B=q,P=new w(e),z=c.getFontSize(e),H=e.textXCoordinate?e.textXCoordinate:"left"===y?1:"right"===y?R:R/2,V=e.textYCoordinate?e.textYCoordinate:"top"===S?1:"center"===S?I/2:I,N=m+" "+z+" "+f,D=d?Math.floor(d.scaledWidth/2):0,G=d?x-d.scaledWidth:0,_=d?Math.floor(d.scaledHeight/2):0,$=d?E-d.scaledHeight:0;q=q!==a?q:10,U=U!==a?U:.1,r.width=R,r.height=I,n=r.getContext("2d"),function e(){p.length||0!==k.currentTime?function e(){var r=B-1;function i(){var i;v&&j.push(n.getImageData(0,0,R,I)),F&&n.drawImage(F,M,T,O,A),b&&(n.font=N,n.fillStyle=u,n.textAlign=y,n.textBaseline=S,n.fillText(b,H,V)),i=n.getImageData(0,0,R,I),P.addFrameImageData(i),g((q-(B=r))/q),r>0&&c.requestTimeout(e,W),B||P.getBase64GIF(function(e){t({error:!1,errorCode:"",errorMsg:"",image:e,cameraStream:s,videoElement:k,webcamVideoElement:L,savedRenderingContexts:j,keepCameraOn:h})})}p.length?(n.putImageData(p[q-B],0,0),i()):function e(){try{G>x&&(G=x),$>E&&($=E),D<0&&(D=0),_<0&&(_=0),n.filter=l,n.drawImage(k,D,_,G,$,0,0,R,I),i()}catch(t){if("NS_ERROR_NOT_AVAILABLE"!==t.name)throw t;c.requestTimeout(e,100)}}()}():c.requestTimeout(e,100)}()},getCropDimensions:function(){var e=arguments.length>0&&arguments[0]!==a?arguments[0]:{},t=e.videoWidth,r=e.videoHeight,n=e.gifWidth,i=e.gifHeight,o={width:0,height:0,scaledWidth:0,scaledHeight:0};return t>r?(o.width=Math.round(t*(i/r))-n,o.scaledWidth=Math.round(o.width*(r/i))):(o.height=Math.round(r*(n/t))-i,o.scaledHeight=Math.round(o.height*(t/n))),o}},k={loadedData:!1,defaultVideoDimensions:{width:640,height:480},findVideoSize:function e(t){e.attempts=e.attempts||0;var r=t.cameraStream,n=t.completedCallback,i=t.videoElement;i&&(i.videoWidth>0&&i.videoHeight>0?(i.removeEventListener("loadeddata",k.findVideoSize),n({videoElement:i,cameraStream:r,videoWidth:i.videoWidth,videoHeight:i.videoHeight})):e.attempts<10?(e.attempts+=1,c.requestTimeout(function(){k.findVideoSize(t)},400)):n({videoElement:i,cameraStream:r,videoWidth:k.defaultVideoDimensions.width,videoHeight:k.defaultVideoDimensions.height}))},onStreamingTimeout:function(e){c.isFunction(e)&&e({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - Timed out while trying to start streaming",image:null,cameraStream:{}})},stream:function(e){var t=c.isArray(e.existingVideo)?e.existingVideo[0]:e.existingVideo,r=e.cameraStream,n=e.completedCallback,i=e.streamedCallback,o=e.videoElement;if(c.isFunction(i)&&i(),t){if(c.isString(t))o.src=t,o.innerHTML='<source src="'+t+'" type="video/'+c.getExtension(t)+'" />';else if(t instanceof Blob){try{o.src=c.URL.createObjectURL(t)}catch(e){}o.innerHTML='<source src="'+t+'" type="'+t.type+'" />'}}else if(o.mozSrcObject)o.mozSrcObject=r;else if(c.URL)try{o.srcObject=r,o.src=c.URL.createObjectURL(r)}catch(e){o.srcObject=r}o.play(),c.requestTimeout(function e(){e.count=e.count||0,!0===k.loadedData?(k.findVideoSize({videoElement:o,cameraStream:r,completedCallback:n}),k.loadedData=!1):(e.count+=1)>10?k.findVideoSize({videoElement:o,cameraStream:r,completedCallback:n}):e()},0)},startStreaming:function(e){var t=c.isFunction(e.error)?e.error:c.noop,r=c.isFunction(e.streamed)?e.streamed:c.noop,n=c.isFunction(e.completed)?e.completed:c.noop,o=e.crossOrigin,a=e.existingVideo,s=e.lastCameraStream,d=e.options,l=e.webcamVideoElement,u=c.isElement(a)?a:l||i.createElement("video");o&&(u.crossOrigin=d.crossOrigin),u.autoplay=!0,u.loop=!0,u.muted=!0,u.addEventListener("loadeddata",function(e){k.loadedData=!0,d.offset&&(u.currentTime=d.offset)}),a?k.stream({videoElement:u,existingVideo:a,completedCallback:n}):s?k.stream({videoElement:u,cameraStream:s,streamedCallback:r,completedCallback:n}):c.getUserMedia({video:!0},function(e){k.stream({videoElement:u,cameraStream:e,streamedCallback:r,completedCallback:n})},t)},startVideoStreaming:function(e){var t=arguments.length>1&&arguments[1]!==a?arguments[1]:{},r=t.timeout!==a?t.timeout:0,n=t.callback,i=t.webcamVideoElement,o=void 0;r>0&&(o=c.requestTimeout(function(){k.onStreamingTimeout(n)},1e4)),k.startStreaming({error:function(){n({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - the user probably denied permission",image:null,cameraStream:{}})},streamed:function(){clearTimeout(o)},completed:function(){var t=arguments.length>0&&arguments[0]!==a?arguments[0]:{},r=t.cameraStream,n=t.videoElement,i=t.videoHeight,o=t.videoWidth;e({cameraStream:r,videoElement:n,videoHeight:i,videoWidth:o})},lastCameraStream:t.lastCameraStream,webcamVideoElement:i,crossOrigin:t.crossOrigin,options:t})},stopVideoStreaming:function(e){var t=e=c.isObject(e)?e:{},r=t.keepCameraOn,n=t.videoElement,i=t.webcamVideoElement,o=e.cameraStream||{},a=o.getTracks&&o.getTracks()||[],s=!!a.length,d=a[0];!r&&s&&c.isFunction(d.stop)&&d.stop(),c.isElement(n)&&!i&&(n.pause(),c.isFunction(c.URL.revokeObjectURL)&&!c.webWorkerError&&n.src&&c.URL.revokeObjectURL(n.src),c.removeElement(n))}};function E(e){e=c.isObject(e)?e:{},k.stopVideoStreaming(e)}function x(e,t){var r=e.options||{},n=r.images,o=r.video,a=Number(r.gifWidth),s=Number(r.gifHeight),d=(Number(r.numFrames),e.cameraStream),l=e.videoElement,u=e.videoWidth,f=e.videoHeight,m=S.getCropDimensions({videoWidth:u,videoHeight:f,gifHeight:s,gifWidth:a}),h=t;r.crop=m,r.videoElement=l,r.videoWidth=u,r.videoHeight=f,r.cameraStream=d,c.isElement(l)&&(l.width=a+m.width,l.height=s+m.height,r.webcamVideoElement||(c.setCSSAttr(l,{position:"fixed",opacity:"0"}),i.body.appendChild(l)),l.play(),S.getGIF(r,function(e){n&&n.length||o&&o.length||E(e),h(e)}))}function L(e,t){if(t=c.isFunction(e)?e:t,e=c.isObject(e)?e:{},c.isFunction(t)){var r=c.mergeOptions(m,e)||{},n=e.cameraStream,o=r.images,s=o?o.length:0,d=r.video,u=r.webcamVideoElement;r=c.mergeOptions(r,{gifWidth:Math.floor(r.gifWidth),gifHeight:Math.floor(r.gifHeight)}),s?function(){var e=arguments.length>0&&arguments[0]!==a?arguments[0]:{},t=e.callback,r=e.images,n=e.options,o=e.imagesLength,s=l.validate({getUserMedia:!0,"window.URL":!0}),d=[],u=0,f=void 0,m=void 0;if(s.error)return t(s);function h(){c.each(d,function(e,t){t&&(t.text?m.addFrame(t.img,n,t.text):m.addFrame(t,n))}),function(e,t){e.getBase64GIF(function(e){t({error:!1,errorCode:"",errorMsg:"",image:e})})}(m,t)}m=new w(n),c.each(r,function(e,r){var a=r;r.src&&(a=a.src),c.isElement(a)?(n.crossOrigin&&(a.crossOrigin=n.crossOrigin),d[e]=a,(u+=1)===o&&h()):c.isString(a)&&(f=new Image,n.crossOrigin&&(f.crossOrigin=n.crossOrigin),function(n){r.text&&(n.text=r.text),n.onerror=function(e){var r=void 0;if(0==--o)return(r={}).error="None of the requested images was capable of being retrieved",t(r)},n.onload=function(t){r.text?d[e]={img:n,text:n.text}:d[e]=n,(u+=1)===o&&h(),c.removeElement(n)},n.src=a}(f),c.setCSSAttr(f,{position:"fixed",opacity:"0"}),i.body.appendChild(f))})}({images:o,imagesLength:s,callback:t,options:r}):d?function(){var e=arguments.length>0&&arguments[0]!==a?arguments[0]:{},t=e.callback,r=e.existingVideo,n=e.options,i=l.validate({getUserMedia:!0,"window.URL":!0}),o=void 0,s=void 0;if(i.error)return t(i);if(c.isElement(r)&&r.src){if(s=r.src,o=c.getExtension(s),!c.isSupported.videoCodecs[o])return t(l.messages.videoCodecs)}else c.isArray(r)&&c.each(r,function(e,t){if(o=t instanceof Blob?t.type.substr(t.type.lastIndexOf("/")+1,t.length):t.substr(t.lastIndexOf(".")+1,t.length),c.isSupported.videoCodecs[o])return r=t,!1});k.startStreaming({completed:function(e){e.options=n||{},x(e,t)},existingVideo:r,crossOrigin:n.crossOrigin,options:n})}({existingVideo:d,callback:t,options:r}):function(){var e=arguments.length>0&&arguments[0]!==a?arguments[0]:{},t=e.callback,r=e.lastCameraStream,n=e.options,i=e.webcamVideoElement;if(!g())return t(l.validate());n.savedRenderingContexts.length?S.getGIF(n,function(e){t(e)}):k.startVideoStreaming(function(){var e=arguments.length>0&&arguments[0]!==a?arguments[0]:{};e.options=n||{},x(e,t)},{lastCameraStream:r,callback:t,webcamVideoElement:i,crossOrigin:n.crossOrigin})}({lastCameraStream:n,callback:t,webcamVideoElement:u,options:r})}}var F={utils:d,error:u,defaultOptions:h,createGIF:L,takeSnapShot:function(e,t){if(t=c.isFunction(e)?e:t,e=c.isObject(e)?e:{},c.isFunction(t)){var r=c.mergeOptions(m,e);L(c.mergeOptions(r,{interval:.1,numFrames:1,gifWidth:Math.floor(r.gifWidth),gifHeight:Math.floor(r.gifHeight)}),t)}},stopVideoStreaming:E,isSupported:function(){return l.isValid()},isWebCamGIFSupported:g,isExistingVideoGIFSupported:function(e){var t=!1;if(c.isArray(e)&&e.length){if(c.each(e,function(e,r){c.isSupported.videoCodecs[r]&&(t=!0)}),!t)return!1}else if(c.isString(e)&&e.length&&!c.isSupported.videoCodecs[e])return!1;return l.isValid({getUserMedia:!0})},isExistingImagesGIFSupported:function(){return l.isValid({getUserMedia:!0})},VERSION:"0.4.5"};(n=function(){return F}.apply(t,[]))===a||(e.exports=n)}("undefined"!=typeof window?window:{},"undefined"!=typeof document?document:{createElement:function(){}},"undefined"!=typeof window?window.navigator:{})},function(e,t,r){var n=r(2);"string"==typeof n&&(n=[[e.i,n,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};r(4)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){(e.exports=r(3)(!1)).push([e.i,"",""])},function(e,t,r){"use strict";e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var r=function(e,t){var r=e[1]||"",n=e[3];if(!n)return r;if(t&&"function"==typeof btoa){var i=(a=n,s=btoa(unescape(encodeURIComponent(JSON.stringify(a)))),c="sourceMappingURL=data:application/json;charset=utf-8;base64,".concat(s),"/*# ".concat(c," */")),o=n.sources.map(function(e){return"/*# sourceURL=".concat(n.sourceRoot).concat(e," */")});return[r].concat(o).concat([i]).join("\n")}var a,s,c;return[r].join("\n")}(t,e);return t[2]?"@media ".concat(t[2],"{").concat(r,"}"):r}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];null!=o&&(n[o]=!0)}for(var a=0;a<e.length;a++){var s=e[a];null!=s[0]&&n[s[0]]||(r&&!s[2]?s[2]=r:r&&(s[2]="(".concat(s[2],") and (").concat(r,")")),t.push(s))}},t}},function(e,t,r){var n,i,o={},a=(n=function(){return window&&document&&document.all&&!window.atob},function(){return void 0===i&&(i=n.apply(this,arguments)),i}),s=function(e){var t={};return function(e,r){if("function"==typeof e)return e();if(void 0===t[e]){var n=function(e,t){return t?t.querySelector(e):document.querySelector(e)}.call(this,e,r);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}}(),c=null,d=0,l=[],u=r(5);function f(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=o[n.id];if(i){i.refs++;for(var a=0;a<i.parts.length;a++)i.parts[a](n.parts[a]);for(;a<n.parts.length;a++)i.parts.push(b(n.parts[a],t))}else{var s=[];for(a=0;a<n.parts.length;a++)s.push(b(n.parts[a],t));o[n.id]={id:n.id,refs:1,parts:s}}}}function m(e,t){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s={css:o[1],media:o[2],sourceMap:o[3]};n[a]?n[a].parts.push(s):r.push(n[a]={id:a,parts:[s]})}return r}function h(e,t){var r=s(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=l[l.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),l.push(t);else if("bottom"===e.insertAt)r.appendChild(t);else{if("object"!=typeof e.insertAt||!e.insertAt.before)throw new Error("[Style Loader]\n\n Invalid value for parameter 'insertAt' ('options.insertAt') found.\n Must be 'top', 'bottom', or Object.\n (https://github.com/webpack-contrib/style-loader#insertat)\n");var i=s(e.insertAt.before,r);r.insertBefore(t,i)}}function g(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=l.indexOf(e);t>=0&&l.splice(t,1)}function v(e){var t=document.createElement("style");if(void 0===e.attrs.type&&(e.attrs.type="text/css"),void 0===e.attrs.nonce){var n=function(){0;return r.nc}();n&&(e.attrs.nonce=n)}return p(t,e.attrs),h(e,t),t}function p(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function b(e,t){var r,n,i,o;if(t.transform&&e.css){if(!(o="function"==typeof t.transform?t.transform(e.css):t.transform.default(e.css)))return function(){};e.css=o}if(t.singleton){var a=d++;r=c||(c=v(t)),n=C.bind(null,r,a,!1),i=C.bind(null,r,a,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=function(e){var t=document.createElement("link");return void 0===e.attrs.type&&(e.attrs.type="text/css"),e.attrs.rel="stylesheet",p(t,e.attrs),h(e,t),t}(t),n=function(e,t,r){var n=r.css,i=r.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(n=u(n));i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}.bind(null,r,t),i=function(){g(r),r.href&&URL.revokeObjectURL(r.href)}):(r=v(t),n=function(e,t){var r=t.css,n=t.media;n&&e.setAttribute("media",n);if(e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}.bind(null,r),i=function(){g(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");(t=t||{}).attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||"boolean"==typeof t.singleton||(t.singleton=a()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=m(e,t);return f(r,t),function(e){for(var n=[],i=0;i<r.length;i++){var a=r[i];(s=o[a.id]).refs--,n.push(s)}e&&f(m(e,t),t);for(i=0;i<n.length;i++){var s;if(0===(s=n[i]).refs){for(var c=0;c<s.parts.length;c++)s.parts[c]();delete o[s.id]}}}};var y,w=(y=[],function(e,t){return y[e]=t,y.filter(Boolean).join("\n")});function C(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i,o=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});return/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/|\s*$)/i.test(o)?e:(i=0===o.indexOf("//")?o:0===o.indexOf("/")?r+o:n+o.replace(/^\.\//,""),"url("+JSON.stringify(i)+")")})}},function(e,t,r){"use strict";r.r(t);class n{constructor(e,t,r,n){this.height=e,this.width=t,this.classT=r,this.idT=n}create(){const e=document.createElement("canvas"),t=e.getContext("2d");e.width=this.width,e.height=this.height,e.className=this.classT,e.id=this.idT,t.rect(0,0,this.height,this.width);const r={};return r.canvas=e,r.ctx=t,r}getCanvas(){const e={};return e.canvas=document.querySelector(`#${this.idT}`),e.ctx=e.canvas.getContext("2d"),e}cloneCanvas(e,t,r){const n=e.getContext("2d");return n.clearRect(0,0,t,r),n.drawImage(this.getCanvas().canvas,0,0,t,r),n}clearCanvas(){this.getCanvas().ctx.clearRect(0,0,this.width,this.height)}convertToImg(e){const t=document.querySelectorAll(".frame"),r=this.getCanvas().canvas.toDataURL(),n=new Image;return n.src=r,n.style.width=e,n.style.height=e,n.classList="imgFrame",n.id=`frame_img_${t.length-1}`,n}refresh(){const e=document.querySelectorAll(".frame");let t=null;e.forEach(e=>{e.classList.contains("active")&&(t=e)});const r=t.querySelector(".imgFrame");this.clearCanvas(),this.getCanvas().ctx.drawImage(r,0,0,800,800)}}r(1);var i=n;var o=r(0),a=r.n(o);const s=new n(800,800,"mainCanvas","mainCanvas");class c{getCanvasSize(){const e=document.querySelector("#sizes_canvas");return e.options[e.selectedIndex].value}getPenSize(){const e=document.querySelector("#sizes_pen");return e.options[e.selectedIndex].value}getCursorCoords(e){const t=s.getCanvas().canvas,r=t.getBoundingClientRect().left,n=t.getBoundingClientRect().top,i={};return i.x=e.clientX-r,i.y=e.clientY-n,i}showCanvasInfo(){let e=this.getCanvasSize();const t=document.querySelector("#sizes_canvas"),r=document.querySelector("#cursor_coords"),n=s.getCanvas().canvas;let i=null,o=n.width/e;const a=document.querySelector("#layer_size");return t.addEventListener("input",()=>{e=this.getCanvasSize(),o=n.width/e,a.innerHTML=`${e}x${e}`}),s.getCanvas().canvas.addEventListener("mousemove",e=>{(i=this.getCursorCoords(e)).x=Math.floor(i.x/o),i.y=Math.floor(i.y/o),i.x+1<1&&(i.x+=1),r.innerHTML=`${i.x+1} : ${i.y+1}`}),i}fullScreen(e){e.fullscreenElement?e.exitFullscreen():e.requestFullscreen()}downloadGif(){a.a.createGIF({images:[{src:"../img/2.png",text:"1"},{src:"../img/pelmen.png",text:"2"},{src:"../img/32.jpg",text:"3"}],interval:1},function(e){if(!e.error){const t=e.image,r=document.createElement("img");r.src=t,document.body.appendChild(r)}})}renumberFrames(){const e=document.querySelectorAll(".frame"),t=document.querySelectorAll(".imgFrame");e.forEach((e,r)=>{e.id=`frame_${r}`,t[r].id=`frame_img_${r}`})}setFramesIventListeners(e){e.addEventListener("click",()=>s.refresh()),e.addEventListener("click",()=>this.active(e,".frame"))}active(e,t){document.querySelectorAll(t).forEach(e=>{e.classList.contains("active")&&e.classList.remove("active")}),e.classList.add("active")}}const d=new n(800,800,"mainCanvas","mainCanvas"),l=new class{constructor(e){this.parametr=e}get primaryColor(){return document.querySelector("#main").value}get secondaryColor(){return document.querySelector("#secondary").value}}("main"),u=new c;class f{draw(){const e=d.getCanvas().canvas,t=d.getCanvas().ctx;let r=null,n=null,i=null,o=null,a=null,s=null;function c(c){const d=u.getCanvasSize(),l=u.getPenSize();i=u.getCursorCoords(c).x,o=u.getCursorCoords(c).y;const f=e.width/d,m=Math.abs(i-r),h=Math.abs(o-n),g=r<i?1:-1,v=n<o?1:-1;let p=m-h;for(;a=Math.floor(r/f),s=Math.floor(n/f),t.fillRect(a*f,s*f,f*l,f*l),r!==i||n!==o;){const e=2*p;e>-h&&(p-=h,r+=g),e<m&&(p+=m,n+=v)}return 1}function f(){e.removeEventListener("mousemove",c)}e.addEventListener("mousedown",function(i){t.beginPath(),t.fillStyle=l.primaryColor,r=u.getCursorCoords(i).x,n=u.getCursorCoords(i).y,t.moveTo(r,n),e.addEventListener("mousemove",c),e.addEventListener("click",c)}),e.addEventListener("mouseout",f),e.addEventListener("mouseup",f)}}class m{render(){console.log("Bucket")}}class h{render(){console.log("Stroke")}}new n(800,800,"mainCanvas");class g{PenTool(){(new f).draw()}BucketTool(){(new m).render()}StrokeTool(){(new h).render()}}const v=new n(800,800,"mainCanvas","mainCanvas"),p=new c;let b;class y{render(){const e=document.querySelectorAll(".frame");let t=null,r=0;e.forEach((e,n)=>{e.classList.contains("active")&&(t=e,r=n)});const n=v.convertToImg("104px");n.id=`frame_img_${r}`,n.draggable="true",t.replaceChild(n,t.querySelector(".imgFrame")),t.style.backgroundImage=`url("${n.src}")`}addFrame(){const e=document.querySelectorAll(".frame");let t=null;e.forEach(e=>{e.classList.contains("active")&&e.classList.remove("active")}),(t=e[0].cloneNode(!0)).classList="list-group-item frame active",t.id=`frame_${e.length}`,e[e.length-1].insertAdjacentElement("afterend",t),t.addEventListener("click",()=>p.active(t,".frame")),t.addEventListener("click",()=>v.refresh()),this.dragAndDrop(t),t.addEventListener("dragstart",()=>this.dragAndDrop(t)),v.clearCanvas();const r=t.querySelector("#copyButton"),n=t.querySelector("#deleteButton");r.addEventListener("click",e=>this.copyFrame(e),!0),n.addEventListener("click",e=>this.deleteFrame(e),!0),t.style.backgroundImage=null,t.replaceChild(v.convertToImg("104px"),t.querySelector(".imgFrame"))}copyFrame(e){e.stopPropagation();const t=e.target.parentNode.cloneNode(!0),r=document.querySelectorAll(".frame");r[r.length-1].insertAdjacentElement("afterend",t),p.active(t,".frame"),v.refresh(),t.classList="list-group-item frame active",t.addEventListener("click",()=>p.active(t,".frame")),t.addEventListener("click",()=>v.refresh());const n=t.querySelector(".imgFrame");t.style.backgroundImage=`url("${n.src}")`,p.renumberFrames();const i=t.querySelector("#copyButton"),o=t.querySelector("#deleteButton");i.addEventListener("click",e=>this.copyFrame(e),!0),o.addEventListener("click",e=>this.deleteFrame(e),!0),this.dragAndDrop(t),t.addEventListener("dragstart",()=>this.dragAndDrop(t))}deleteFrame(e){e.stopPropagation();let t=document.querySelectorAll(".frame");if(1===t.length)return 0;return e.target.parentNode.remove(),t=document.querySelectorAll(".frame"),p.renumberFrames(),t[t.length-1].classList="list-group-item frame active",v.refresh(),1}dragAndDrop(e){e.addEventListener("dragstart",function(e){this.classList="list-group-item frame active",p.active(this,".frame"),b=this,e.dataTransfer.effectAllowed="move"},!1),e.addEventListener("dragenter",e=>this.dragEnter(e)),e.addEventListener("dragover",e=>this.dragOver(e)),e.addEventListener("dragleave",e=>this.dragLeave(e)),e.addEventListener("drop",function(e){if(e.stopPropagation&&e.stopPropagation(),b!==this){const e=b.cloneNode(!0),t=this.cloneNode(!0);this.parentNode.replaceChild(e,this),b.parentNode.replaceChild(t,b),e.addEventListener("click",()=>p.active(e,".frame")),e.addEventListener("click",()=>v.refresh()),e.classList.add("swapped"),t.classList.add("swapped"),t.addEventListener("click",()=>p.active(t,".frame")),t.addEventListener("click",()=>v.refresh())}return p.renumberFrames(),!1},!1),e.addEventListener("dragend",e=>this.dragEnd(e))}dragEnter(e){e.stopPropagation(),e.target.classList.add("over")}dragOver(e){e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.dataTransfer.dropEffect="move"}dragLeave(e){e.stopPropagation(),e.target.classList.remove("over")}dragEnd(){document.querySelectorAll(".frame").forEach(e=>e.classList.remove("over")),document.querySelectorAll(".swapped").forEach(e=>{const t=e.querySelector("#copyButton"),r=e.querySelector("#deleteButton");t.addEventListener("click",e=>this.copyFrame(e),!0),r.addEventListener("click",e=>this.deleteFrame(e),!0),this.dragAndDrop(e),e.classList.remove("swapped")})}}class w{getParent(){return document.querySelector("#preview")}getChild(){return this.getParent().childNodes[0]}showRate(){const e=document.querySelector("#frame_rate");return e.addEventListener("input",()=>{document.querySelector("#fps_value").innerHTML=e.value}),e.value}startAnimation(e){const t=document.querySelectorAll(".imgFrame"),r=document.querySelector("#frame_rate"),n=document.querySelector("#preview");r.value=parseInt(r.value,10);const i=1e3/r.value;var o;return e<t.length?0!=r.value&&(o=t[e],n.style.backgroundImage=`url("${o.src}")`,e+=1):e=0,setTimeout(()=>this.startAnimation(e),i),1}}(new class{constructor(){this.penSize=1}start(){const e=new i(800,800,"mainCanvas","mainCanvas"),t=new g,r=new y,n=new w,o=new c,a=document.querySelector(".canvas-main-container"),s=document.querySelector("#frame_0"),d=document.querySelector("#add-btn"),l=document.querySelectorAll(".tool"),u=document.querySelector("#fullScreen"),f=document.querySelector("#copyButton"),m=document.querySelector("#deleteButton");n.showRate(),a.appendChild(e.create().canvas),s.appendChild(e.convertToImg("200px")),l.forEach(e=>{e.addEventListener("click",()=>o.active(e,".tool"))}),s.addEventListener("click",()=>o.active(s,".frame")),s.addEventListener("click",()=>e.refresh()),s.addEventListener("dragstart",()=>r.dragAndDrop(s)),r.dragAndDrop(s),l[0].addEventListener("click",t.PenTool),l[1].addEventListener("click",t.BucketTool),l[2].addEventListener("click",t.StrokeTool),d.addEventListener("click",()=>r.addFrame()),f.addEventListener("click",e=>r.copyFrame(e),!0),m.addEventListener("click",e=>r.deleteFrame(e),!0),e.getCanvas().canvas.addEventListener("mouseup",()=>{r.render()}),e.getCanvas().canvas.addEventListener("mouseout",r.render),u.addEventListener("click",()=>o.fullScreen(n.getParent())),o.downloadGif(),o.showCanvasInfo(),n.startAnimation(0)}}).start()}]);
//# sourceMappingURL=app.bundle.js.map